!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.CheckCode=i()}(this,function(){"use strict";return"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,i){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),o=1;o<arguments.length;o++){var s=arguments[o];if(null!=s)for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(e[h]=s[h])}return e},writable:!0,configurable:!0}),function(){function t(t,i){this.canvas=document.querySelector(t),this.options=Object.assign({num:4,lineNum:5,dotNum:20},i||{}),this.ctx=this.canvas.getContext("2d"),this.w=120,this.h=40;var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";this.alphabetList=e.split(""),this.alphabetListLen=e.split("").length,this.canvas.width=this.w,this.canvas.height=this.h,this.charOffset=this.w/this.options.num|0}return t.prototype.draw=function(){var t=0,i="";for(this.ctx.clearRect(0,0,this.w,this.h),this.drawBackGround();t<this.options.num;t++){var e=this.alphabetList[this.madeRandom(0,this.alphabetListLen)];i+=e,this.drawText(e,this.charOffset*t)}return this.drawDot(),this.drawLine(),i},t.prototype.madeRandom=function(t,i){return void 0===i&&(i=t),~~(Math.random()*(i-t)+t)},t.prototype.madeRandomColor=function(t,i){return t<0&&(t=0),i>255&&(i=255),"rgb("+this.madeRandom(t,i)+","+this.madeRandom(t,i)+","+this.madeRandom(t,i)+")"},t.prototype.drawBackGround=function(){this.ctx.save(),this.ctx.fillStyle=this.madeRandomColor(240,250),this.ctx.fillRect(0,0,this.w,this.h),this.ctx.restore()},t.prototype.drawDot=function(t){void 0===t&&(t=this.options.dotNum);for(var i=0,e=0,o=0;o<t;o++)i=this.madeRandom(0,this.w),e=this.madeRandom(0,this.h),this.ctx.beginPath(),this.ctx.arc(i,e,1,0,2*Math.PI),this.ctx.fillStyle=this.madeRandomColor(150,200),this.ctx.fill(),this.ctx.closePath()},t.prototype.drawLine=function(t){void 0===t&&(t=this.options.lineNum);for(var i=0,e=0,o=0,s=0,h=0;h<t;h++)i=this.madeRandom(0,this.w),e=this.madeRandom(0,this.h),o=this.madeRandom(0,this.w),s=this.madeRandom(0,this.h),this.ctx.beginPath(),this.ctx.moveTo(i,e),this.ctx.lineTo(o,s),this.ctx.strokeStyle=this.madeRandomColor(180,200),this.ctx.stroke(),this.ctx.closePath()},t.prototype.drawText=function(t,i){var e=this.madeRandom(20,40),o=this.madeRandomColor(80,150),s=this.madeRandom(-20,20)*Math.PI/180;this.ctx.save(),this.ctx.font=e+"px Simhei",this.ctx.textBaseline="middle",this.ctx.fillStyle=o,this.ctx.translate(i+18,0),this.ctx.rotate(s),this.ctx.fillText(t,-10,this.h>>1),this.ctx.restore()},t}()});
