!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.CheckCode=i()}(this,function(){"use strict";"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,i){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),s=1;s<arguments.length;s++){var o=arguments[s];if(null!=o)for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},writable:!0,configurable:!0});var t="function"!=typeof CanvasRenderingContext2D;return t||Object.assign(CanvasRenderingContext2D.prototype,{setFillStyle:function(t){this.fillStyle=t},setStrokeStyle:function(t){this.strokeStyle=t},setFontSize:function(t){this.font=t+"px Simhei"},setTextBaseline:function(t){this.textBaseline=t}}),function(){function i(t,i){this.options=Object.assign({num:4,lineNum:5,dotNum:20,canvasWidth:120,canvasHeight:40},i||{}),this.ctx=t,this.w=this.options.canvasWidth,this.h=this.options.canvasHeight;var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";this.alphabetList=e.split(""),this.alphabetListLen=e.split("").length,this.charOffset=this.w/this.options.num|0}return i.prototype.paint=function(){var i=0,e="";for(this.ctx.clearRect(0,0,this.w,this.h),this.drawBackGround();i<this.options.num;i++){var s=this.alphabetList[this.madeRandom(0,this.alphabetListLen)];e+=s,this.drawText(s,this.charOffset*i)}return this.drawDot(),this.drawLine(),t&&this.ctx.draw(),e},i.prototype.madeRandom=function(t,i){return void 0===i&&(i=t),~~(Math.random()*(i-t)+t)},i.prototype.madeRandomColor=function(t,i){return t<0&&(t=0),i>255&&(i=255),"rgb("+this.madeRandom(t,i)+","+this.madeRandom(t,i)+","+this.madeRandom(t,i)+")"},i.prototype.drawBackGround=function(){this.ctx.save(),this.ctx.setFillStyle(this.madeRandomColor(240,250)),this.ctx.fillRect(0,0,this.w,this.h),this.ctx.restore()},i.prototype.drawDot=function(t){void 0===t&&(t=this.options.dotNum);for(var i=0,e=0,s=0;s<t;s++)i=this.madeRandom(0,this.w),e=this.madeRandom(0,this.h),this.ctx.beginPath(),this.ctx.arc(i,e,1,0,2*Math.PI),this.ctx.setFillStyle(this.madeRandomColor(150,200)),this.ctx.fill(),this.ctx.closePath()},i.prototype.drawLine=function(t){void 0===t&&(t=this.options.lineNum);for(var i=0,e=0,s=0,o=0,n=0;n<t;n++)i=this.madeRandom(0,this.w),e=this.madeRandom(0,this.h),s=this.madeRandom(0,this.w),o=this.madeRandom(0,this.h),this.ctx.beginPath(),this.ctx.moveTo(i,e),this.ctx.lineTo(s,o),this.ctx.setStrokeStyle(this.madeRandomColor(180,200)),this.ctx.stroke(),this.ctx.closePath()},i.prototype.drawText=function(t,i){var e=this.madeRandom(20,40),s=this.madeRandomColor(80,150),o=this.madeRandom(-20,20)*Math.PI/180;this.ctx.save(),this.ctx.setFontSize(e),this.ctx.setTextBaseline("middle"),this.ctx.setFillStyle(s),this.ctx.translate(i+18,0),this.ctx.rotate(o),this.ctx.fillText(t,-10,this.h>>1),this.ctx.restore()},i}()});
